# Cloudflared Tunnel Configuration
# Variables: tunnel_uuid, tunnel_name, domain_name, services
tunnel: {{ tunnel_uuid }}
credentials-file: /etc/cloudflared/{{ tunnel_uuid }}.json

# Optional: Metrics and logging
metrics: 0.0.0.0:2000
logfile: /var/log/cloudflared.log
loglevel: info

# Optional: Disable auto-updates (recommended for systemd)
no-autoupdate: true

# Ingress rules - traffic routing configuration
ingress:
{% for service in services %}
  # {{ service.description | default(service.hostname) }}
  - hostname: {{ service.hostname }}
{% if service.path is defined %}
    path: {{ service.path }}
{% endif %}
    service: {{ service.service }}
{% endfor %}

  # Catch-all rule (required and must be last)
  - service: http_status:404
